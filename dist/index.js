"use strict";var $=Object.defineProperty;var It=Object.getOwnPropertyDescriptor;var Dt=Object.getOwnPropertyNames;var Ft=Object.prototype.hasOwnProperty;var Mt=(t,e)=>{for(var r in e)$(t,r,{get:e[r],enumerable:!0})},Pt=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Dt(e))!Ft.call(t,o)&&o!==r&&$(t,o,{get:()=>e[o],enumerable:!(n=It(e,o))||n.enumerable});return t};var Ct=t=>Pt($({},"__esModule",{value:!0}),t);var Cr={};Mt(Cr,{Action:()=>h,BinarySearchTree:()=>M,CMF_DEFAULT_PERIOD:()=>Ve,CMI_PERIOD:()=>St,Chart:()=>tt,CompanyResultSortBy:()=>mt,DEFAULT_VWMA_PERIOD:()=>X,EMV_DEFAULT_PERIOD:()=>lt,KC_PERIOD:()=>wt,NVI_DEFAULT_PERIOD:()=>Ke,NumRange:()=>v,NumScaler:()=>I,STRATEGY_INFOS:()=>jt,StrategyStatsSortBy:()=>ht,Trend:()=>j,UI_DEFAULT_PERIOD:()=>vt,VWAP_DEFAULT_PERIOD:()=>gt,abs:()=>E,absolutePriceOscillator:()=>_,absolutePriceOscillatorStrategy:()=>Ht,accelerationBands:()=>Me,accelerationBandsStrategy:()=>Pe,accumulationDistribution:()=>rt,add:()=>g,addBy:()=>O,applyActions:()=>Z,aroon:()=>pe,aroonStrategy:()=>be,atr:()=>V,awesomeOscillator:()=>te,awesomeOscillatorStrategy:()=>re,backtest:()=>Ut,balanceOfPower:()=>ge,balanceOfPowerStrategy:()=>de,bollingerBands:()=>Te,bollingerBandsStrategy:()=>Ne,bollingerBandsWidth:()=>Or,buyAndHoldStrategy:()=>ee,chaikinMoneyFlow:()=>Ge,chaikinMoneyFlowStrategy:()=>He,chaikinOscillator:()=>xt,chandeForecastOscillator:()=>ye,chandeForecastOscillatorStrategy:()=>Ae,chandelierExit:()=>vr,changes:()=>F,checkSameLength:()=>d,communityChannelIndex:()=>Lt,computeStrategyStats:()=>Kt,concatAssets:()=>Mr,customRsi:()=>Y,daysAgo:()=>nr,daysLaterFrom:()=>or,defaultAbsolutePriceOscillator:()=>le,defaultAbsolutePriceOscillatorStrategy:()=>fe,defaultChaikinOscillator:()=>ir,defaultCommunityChannelIndex:()=>gr,defaultEaseOfMovement:()=>Ye,defaultForceIndex:()=>We,defaultKdj:()=>Se,defaultKeltnerChannel:()=>Er,defaultMoneyFlowIndex:()=>qe,defaultPercentagePriceOscillator:()=>cr,defaultPercentageVolumeOscillator:()=>br,defaultProjectionOscillator:()=>ke,defaultUlcerIndex:()=>Rr,defaultVolumeWeightedAveragePrice:()=>Je,defaultVwma:()=>Lr,defaultVwmaStrategy:()=>Pr,dema:()=>dr,divide:()=>s,divideBy:()=>L,donchianChannel:()=>Br,easeOfMovement:()=>ft,easeOfMovementStrategy:()=>_e,ema:()=>p,extractSigns:()=>z,forceIndex:()=>pt,forceIndexStrategy:()=>je,generateNumbers:()=>T,ichimokuCloud:()=>ne,ichimokuCloudStrategy:()=>oe,kdj:()=>st,kdjStrategy:()=>Le,keltnerChannel:()=>Ot,leastSquare:()=>at,linearRegressionUsingLeastSquare:()=>he,macd:()=>we,macdStrategy:()=>Oe,massIndex:()=>hr,max:()=>k,mmax:()=>y,mmin:()=>S,moneyFlowIndex:()=>bt,moneyFlowIndexStrategy:()=>Xe,movingChandeForecastOscillator:()=>Yt,movingLeastSquare:()=>U,movingLinearRegressionUsingLeastSquare:()=>xe,mstd:()=>Ce,msum:()=>A,multiply:()=>x,multiplyBy:()=>l,negativeVolumeIndex:()=>$e,negativeVolumeIndexStrategy:()=>ze,newAssetWithLength:()=>Fr,onBalanceVolume:()=>Ir,parabolicSar:()=>Be,parabolicSarStrategy:()=>Ee,percentagePriceOscillator:()=>yt,percentageVolumeOscillator:()=>At,pow:()=>J,projectionOscillator:()=>ct,projectionOscillatorStrategy:()=>Ue,qstick:()=>xr,reverseActions:()=>kt,rma:()=>H,roundDigits:()=>G,roundDigitsAll:()=>Nt,rsi:()=>Gt,rsi2:()=>me,rsi2Strategy:()=>ie,shiftRightAndFillBy:()=>C,shiftRightBy:()=>R,since:()=>W,sma:()=>b,sortCompanyResults:()=>Vt,sortStrategyStats:()=>$t,sqrt:()=>Q,stochasticOscillator:()=>ue,stochasticOscillatorStrategy:()=>ae,subtract:()=>u,subtractBy:()=>Tt,tema:()=>yr,toISODateString:()=>rr,toMonthAndDay:()=>mr,transpose:()=>ot,trima:()=>Ar,trix:()=>Sr,typicalPrice:()=>P,typicalPriceStrategy:()=>Re,ulcerIndex:()=>Bt,volumePriceTrend:()=>Dr,volumeWeightedAveragePrice:()=>dt,volumeWeightedAveragePriceStrategy:()=>Qe,vortex:()=>De,vortexStrategy:()=>Fe,vwma:()=>K,williamsR:()=>se,williamsRStrategy:()=>ce,wvmaStrategy:()=>Et});module.exports=Ct(Cr);function d(...t){if(t.length>0){let e=t[0].length;for(let r=1;r<t.length;r++)if(t[r].length!==e)throw new Error(`values length at ${r} not ${e}`)}}function E(t){return t.map(e=>Math.abs(e))}function g(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=t[n]+e[n];return r}function O(t,e){let r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]+t;return r}function s(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=t[n]/e[n];return r}function L(t,e){let r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]/t;return r}function x(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=t[n]*e[n];return r}function l(t,e){let r=new Array(e.length);for(let n=0;n<r.length;n++)r[n]=e[n]*t;return r}function u(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=t[n]-e[n];return r}function Tt(t,e){let r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]-t;return r}function C(t,e,r){let n=new Array(r.length);for(let o=0;o<n.length;o++)o<t?n[o]=e:n[o]=r[o-t];return n}function R(t,e){return C(t,0,e)}function F(t,e){return u(e,R(t,e))}function z(t){return t.map(e=>e>=0?1:-1)}function ot(...t){d(...t);let e=new Array(t[0].length);for(let r=0;r<e.length;r++){e[r]=new Array(t.length);for(let n=0;n<e[r].length;n++)e[r][n]=t[n][r]}return e}function k(...t){return ot(...t).map(e=>Math.max(...e))}function G(t,e){let r=Math.pow(10,t);return Math.round(e*r)/r}function Nt(t,e){return e.map(r=>G(t,r))}function T(t,e,r){let n=new Array((e-t)/r);for(let o=0;o<n.length;o++)n[o]=t+r*o;return n}function J(t,e){return t.map(r=>Math.pow(r,e))}function Q(t){return t.map(e=>Math.sqrt(e))}var h=(n=>(n[n.SELL=-1]="SELL",n[n.HOLD=0]="HOLD",n[n.BUY=1]="BUY",n))(h||{});function kt(t){return t.map(e=>e===1?-1:e===-1?1:0)}function Z(t,e){d(t,e);let r=new Array(t.length),n=1,o=n,m=0;for(let i=0;i<r.length;i++)e[i]===1?o>0&&(m=o/t[i],o=0):e[i]===-1&&m>0&&(o=m*t[i],m=0),r[i]=(m*t[i]+o-n)/n;return r}function Ut(t,e){let r=new Array(e.length);for(let n=0;n<r.length;n++){let o=e[n].strategy(t),m=Z(t.closings,o);r[n]={info:e[n],gain:m[m.length-1],lastAction:o[o.length-1]}}return r.sort((n,o)=>o.gain-n.gain),r}var mt=(m=>(m[m.SYMBOL=0]="SYMBOL",m[m.NAME=1]="NAME",m[m.STRATEGY=2]="STRATEGY",m[m.GAIN=3]="GAIN",m[m.ACTION=4]="ACTION",m))(mt||{});function Vt(t,e,r){let n=[];switch(e){case 0:n=t.sort((o,m)=>o.companyInfo.symbol.localeCompare(m.companyInfo.symbol));break;case 1:n=t.sort((o,m)=>o.companyInfo.name.localeCompare(m.companyInfo.name));break;case 2:n=t.sort((o,m)=>o.strategyResults[0].info.name.localeCompare(m.strategyResults[0].info.name));break;case 3:n=t.sort((o,m)=>o.strategyResults[0].gain-m.strategyResults[0].gain);break;case 4:n=t.sort((o,m)=>o.strategyResults[0].lastAction-m.strategyResults[0].lastAction);break}return r||(n=n.reverse()),n}function ee(t){return Array(t.closings.length).fill(1)}function b(t,e){let r=new Array(e.length),n=0;for(let o=0;o<e.length;o++)n+=e[o],o>=t?(n-=e[o-t],r[o]=n/t):r[o]=n/(o+1);return r}function te(t,e){let r=L(2,g(e,t)),n=b(5,r),o=b(34,r);return u(n,o)}function re(t){return te(t.highs,t.lows).map(r=>r>0?1:r<0?-1:0)}var M=class t{constructor(){this.root=null}insert(e){let r={value:e,left:null,right:null};if(this.root===null){this.root=r;return}let n=this.root,o=!1;for(;!o;)r.value<=n.value?n.left===null?(n.left=r,o=!0):n=n.left:n.right===null?(n.right=r,o=!0):n=n.right}remove(e){let r={node:this.root,parent:null};for(;r.node!==null;){if(e===r.node.value)return this.removeNode(r),!0;r.parent=r.node,e<r.node.value?r.node=r.node.left:r.node=r.node.right}return!1}min(){let e=t.minNode(this.root);if(e.node===null)throw new Error("Tree empty");return e.node.value}max(){var r;let e=t.maxNode(this.root);if(e.node===null)throw new Error("Tree empty");return(r=e.node)==null?void 0:r.value}removeNode(e){if(e.node!==null)if(e.node.left!==null&&e.node.right!==null){let r=t.minNode(e.node.right);r.parent===null&&(r.parent=e.node),this.removeNode(r),r.node!==null&&(e.node.value=r.node.value)}else{let r=null;e.node.left!==null?r=e.node.left:r=e.node.right,e.parent===null?this.root=r:e.parent.left===e.node?e.parent.left=r:e.parent.right=r}}static minNode(e){let r={node:null,parent:null};if(e!==null)for(r.node=e;r.node.left!==null;)r.parent=r.node,r.node=r.node.left;return r}static maxNode(e){let r={node:null,parent:null};if(e!==null)for(r.node=e;r.node.right!==null;)r.parent=r.node,r.node=r.node.right;return r}};function y(t,e){let r=new Array(e.length),n=new M;for(let o=0;o<e.length;o++)n.insert(e[o]),o>=t&&n.remove(e[o-t]),r[o]=n.max();return r}function S(t,e){let r=new Array(e.length),n=new M;for(let o=0;o<e.length;o++)n.insert(e[o]),o>=t&&n.remove(e[o-t]),r[o]=n.min();return r}function ne(t,e,r){d(t,e,r);let n=L(2,g(y(9,t),S(9,e))),o=L(2,g(y(26,t),S(26,e))),m=L(2,g(n,o)),i=L(2,g(y(52,t),S(52,e))),a=R(26,r);return{conversionLine:n,baseLine:o,leadingSpanA:m,leadingSpanB:i,laggingSpan:a}}function oe(t){let e=ne(t.highs,t.lows,t.closings),r=new Array(e.baseLine.length);for(let n=0;n<r.length;n++)e.leadingSpanA[n]>e.leadingSpanB[n]?r[n]=1:e.leadingSpanA[n]<e.leadingSpanB[n]?r[n]=-1:r[n]=0;return r}function H(t,e){let r=new Array(e.length),n=0;for(let o=0;o<e.length;o++){let m=o+1;o<t?n+=e[o]:(n=r[o-1]*(t-1)+e[o],m=t),r[o]=n/m}return r}function Y(t,e){let r=new Array(e.length),n=new Array(e.length);r[0]=n[0]=0;for(let f=1;f<e.length;f++){let c=e[f]-e[f-1];c>0?(r[f]=c,n[f]=0):(n[f]=-c,r[f]=0)}let o=H(t,r),m=H(t,n),i=new Array(e.length),a=new Array(e.length);i[0]=a[0]=0;for(let f=1;f<e.length;f++)a[f]=o[f]/m[f],i[f]=100-100/(1+a[f]);return i}function Gt(t){return Y(14,t)}function me(t){return Y(2,t)}function ie(t){let e=me(t.closings),r=new Array(e.length);for(let n=0;n<r.length;n++)e[n]<10?r[n]=1:e[n]>90?r[n]=-1:r[n]=0;return r}function ue(t,e,r){let n=y(14,t),o=S(14,e),m=l(100,s(u(r,o),u(n,o))),i=b(3,m);return{k:m,d:i}}function ae(t){let e=ue(t.highs,t.lows,t.closings),r=new Array(e.k.length);for(let n=0;n<r.length;n++)e.k[n]>=80&&e.d[n]>=80?r[n]=-1:e.k[n]<=20&&e.d[n]<=20?r[n]=1:r[n]=0;return r}var it=14;function se(t,e,r){let n=y(it,t),o=S(it,e);return l(-100,s(u(n,r),u(n,o)))}function ce(t){return se(t.highs,t.lows,t.closings).map(r=>r<=-80?1:r>=-20?-1:0)}function p(t,e){let r=new Array(e.length);if(r.length>0){let n=2/(1+t),o=1-n;r[0]=e[0];for(let m=1;m<r.length;m++)r[m]=e[m]*n+r[m-1]*o}return r}function _(t,e,r){let n=p(t,r),o=p(e,r);return u(n,o)}function le(t){return _(14,30,t)}function ut(t){let e=new Array(t.length);for(let r=0;r<e.length;r++)t[r]>0?e[r]=1:t[r]<0?e[r]=-1:e[r]=0;return e}function Ht(t,e,r){return ut(_(t,e,r.closings))}function fe(t){return ut(le(t.closings))}function W(t){let e=new Array(t.length);if(t.length>0){let r=null,n=0;for(let o=0;o<t.length;o++)r!==t[o]?(r=t[o],n=0):n++,e[o]=n}return e}var N=25;function pe(t,e){d(t,e);let r=W(y(N,t)),n=W(S(N,e)),o=l(100,L(N,O(N,l(-1,r)))),m=l(100,L(N,O(N,l(-1,n))));return{up:o,down:m}}function be(t){let e=pe(t.highs,t.lows),r=new Array(e.up.length);for(let n=0;n<r.length;n++)e.up[n]>e.down[n]?r[n]=1:e.down[n]>e.up[n]?r[n]=-1:r[n]=0;return r}function ge(t,e,r,n){return s(u(n,t),u(e,r))}function de(t){return ge(t.openings,t.highs,t.lows,t.closings).map(r=>r>0?1:r<0?-1:0)}function at(t,e){d(t,e);let r=0,n=0,o=0,m=0;for(let c=0;c<t.length;c++)r+=t[c],n+=t[c]*t[c],o+=e[c],m+=t[c]*e[c];let i=t.length,a=(i*m-r*o)/(i*n-r*r),f=(o-a*r)/i;return{m:a,b:f}}function U(t,e,r){d(e,r);let n=new Array(e.length),o=new Array(e.length),m=0,i=0,a=0,f=0;for(let c=0;c<e.length;c++){m+=e[c],i+=e[c]*e[c],a+=r[c],f+=e[c]*r[c];let w=c+1;c>=t&&(m-=e[c-t],i-=e[c-t]*e[c-t],a-=r[c-t],f-=e[c-t]*r[c-t],w=t),c>0?(n[c]=(w*f-m*a)/(w*i-m*m),o[c]=(a-n[c]*m)/w):(n[c]=0,o[c]=0)}return{m:n,b:o}}function he(t,e){let r=at(t,e);return O(r.b,l(r.m,t))}function xe(t,e,r){let n=U(t,e,r);return g(x(n.m,e),n.b)}function ye(t){let e=T(0,t.length,1),r=he(e,t);return l(100,s(u(t,r),t))}function Yt(t,e){let r=T(0,e.length,1),n=xe(t,r,e);return l(100,s(u(e,n),e))}function Ae(t){return ye(t.closings).map(r=>r>0?1:r<0?-1:0)}function st(t,e,r,n,o,m){let i=y(t,n),a=S(t,o),f=l(100,s(u(m,a),u(i,a))),c=b(e,f),w=b(r,c),D=u(l(3,c),l(2,w));return{k:c,d:w,j:D}}function Se(t,e,r){return st(9,3,3,t,e,r)}function Le(t){let e=Se(t.highs,t.lows,t.closings),r=new Array(e.k.length);for(let n=0;n<r.length;n++)e.k[n]>e.d[n]&&e.k[n]<=20?r[n]=1:e.k[n]<e.d[n]&&e.k[n]>=80?r[n]=-1:r[n]=0;return r}function we(t){let e=p(12,t),r=p(26,t),n=u(e,r),o=p(9,n);return{macdLine:n,signalLine:o}}function Oe(t){let e=we(t.closings),r=new Array(e.macdLine.length);for(let n=0;n<r.length;n++)e.macdLine[n]>e.signalLine[n]?r[n]=1:e.macdLine[n]<e.signalLine[n]?r[n]=-1:r[n]=0;return r}var j=(n=>(n[n.FALLING=-1]="FALLING",n[n.STABLE=0]="STABLE",n[n.RISING=1]="RISING",n))(j||{});var ve=.02,_t=.2;function Be(t,e,r){d(t,e,r);let n=new Array(t.length),o=new Array(t.length);n[0]=-1,o[0]=t[0];let m=ve,i=e[0];for(let a=1;a<o.length;a++){o[a]=o[a-1]-(o[a-1]-i)*m,n[a-1]===-1?(o[a]=Math.max(o[a],t[a-1]),a>1&&(o[a]=Math.max(o[a],t[a-2])),t[a]>=o[a]&&(o[a]=i)):(o[a]=Math.min(o[a],e[a-1]),a>1&&(o[a]=Math.min(o[a],e[a-2])),e[a]<=o[a]&&(o[a]=i));let f=i;o[a]>r[a]?(n[a]=-1,i=Math.min(i,e[a])):(n[a]=1,i=Math.max(i,t[a])),n[a]!==n[a-1]?m=ve:f!==i&&m<_t&&(m+=ve)}return{trends:n,psar:o}}function Ee(t){return Be(t.highs,t.lows,t.closings).trends.map(r=>{switch(r){case-1:return-1;case 1:return 1;case 0:return 0}})}function P(t,e,r){return L(3,g(g(t,e),r))}function Re(t){let e=P(t.highs,t.lows,t.closings),r=new Array(e.length);r[0]=0;for(let n=1;n<r.length;n++)e[n]>e[n-1]?r[n]=1:e[n]<e[n-1]?r[n]=-1:r[n]=0;return r}function A(t,e){let r=new Array(e.length),n=0;for(let o=0;o<e.length;o++)n+=e[o],o>=t&&(n-=e[o-t]),r[o]=n;return r}var Ie=14;function De(t,e,r){d(t,e,r);let n=R(1,r),o=E(u(t,R(1,e))),m=E(u(e,R(1,t))),i=A(Ie,o),a=A(Ie,m),f=k(u(t,e),E(u(t,n)),E(u(e,n))),c=A(Ie,f),w=s(i,c),D=s(a,c);return{plusVi:w,minusVi:D}}function Fe(t){let e=De(t.highs,t.lows,t.closings),r=new Array(e.plusVi.length);for(let n=0;n<r.length;n++)e.plusVi[n]>e.minusVi[n]?r[n]=1:e.plusVi[n]<e.minusVi[n]?r[n]=-1:r[n]=0;return r}function Me(t,e,r){d(t,e,r);let n=s(u(t,e),g(t,e)),o=b(20,x(t,O(1,l(4,n)))),m=b(20,r),i=b(20,x(e,O(1,l(-4,n))));return{upperBand:o,middleBand:m,lowerBand:i}}function Pe(t){let e=Me(t.highs,t.lows,t.closings),r=new Array(e.upperBand.length);for(let n=0;n<r.length;n++)t.closings[n]>=e.upperBand[n]?r[n]=1:r[n]=-1;return r}function Ce(t,e){let r=new Array(e.length),n=b(t,e);for(let o=0;o<e.length;o++)if(r[o]=0,o>=t-1){let m=0;for(let i=o-(t-1);i<=o;i++)m+=(e[i]-n[o])*(e[i]-n[o]);r[o]=Math.sqrt(m/t)}return r}function Te(t,e,r){let n=l(r,Ce(e,t)),o=b(e,t),m=g(o,n),i=u(o,n);return{upperBand:m,middleBand:o,lowerBand:i}}function Ne(t){let e=Te(t.closings,20,2),r=new Array(e.upperBand.length);for(let n=0;n<r.length;n++)t.closings[n]>e.upperBand[n]?r[n]=-1:t.closings[n]<e.lowerBand[n]?r[n]=1:r[n]=0;return r}function ct(t,e,r,n,o){let m=T(0,o.length,1),i=U(t,m,r),a=U(t,m,n),f=g(r,x(i.m,m)),c=g(n,x(a.m,m)),w=y(t,f),D=S(t,c),B=s(l(100,u(o,D)),u(w,D)),Rt=p(e,B);return{po:B,spo:Rt}}function ke(t,e,r){return ct(14,3,t,e,r)}function Ue(t){let e=ke(t.highs,t.lows,t.closings),r=new Array(e.po.length);for(let n=0;n<r.length;n++)e.po[n]>e.spo[n]?r[n]=1:e.po[n]<e.spo[n]?r[n]=-1:r[n]=0;return r}var Ve=20;function Ge(t,e,r,n){let o=s(u(u(r,e),u(t,r)),u(t,e)),m=x(o,n);return s(A(Ve,m),A(Ve,n))}function He(t){return Ge(t.highs,t.lows,t.closings,t.volumes).map(r=>r<0?1:r>0?-1:0)}var lt=14;function ft(t,e,r,n){let o=F(1,L(2,g(e,r))),m=s(L(1e8,n),u(e,r));return b(t,s(o,m))}function Ye(t,e,r){return ft(lt,t,e,r)}function _e(t){return Ye(t.highs,t.lows,t.volumes).map(r=>r>0?1:r<0?-1:0)}function pt(t,e,r){return p(t,x(F(1,e),r))}function We(t,e){return pt(13,t,e)}function je(t){return We(t.closings,t.volumes).map(r=>r>0?1:r<0?-1:0)}function bt(t,e,r,n,o){let m=x(P(e,r,n),o),i=z(F(1,m)),a=x(i,m),f=a.map(B=>B>=0?B:0),c=a.map(B=>B<0?B:0),w=s(A(t,f),A(t,l(-1,c)));return O(100,l(-100,J(O(1,w),-1)))}function qe(t,e,r,n){return bt(14,t,e,r,n)}function Xe(t){return qe(t.highs,t.lows,t.closings,t.volumes).map(r=>r>=80?-1:1)}var Wt=1e3,Ke=255;function $e(t,e){d(t,e);let r=new Array(t.length);for(let n=0;n<r.length;n++)n===0?r[n]=Wt:e[n-1]<e[n]?r[n]=r[n-1]:r[n]=r[n-1]+(t[n]-t[n-1])/t[n-1]*r[n-1];return r}function ze(t){let e=$e(t.closings,t.volumes),r=p(Ke,e),n=new Array(e.length);for(let o=0;o<n.length;o++)e[o]<r[o]?n[o]=1:e[o]>r[o]?n[o]=-1:n[o]=0;return n}var gt=14;function dt(t,e,r){return s(A(t,x(e,r)),A(t,r))}function Je(t,e){return dt(gt,t,e)}function Qe(t){let e=Je(t.closings,t.volumes);return u(e,t.closings).map(n=>n>0?1:n<0?-1:0)}var jt=[{name:"Buy Hold",strategy:ee},{name:"Awesome Oscillator",strategy:re},{name:"RSI 2",strategy:ie},{name:"Ichimoku Cloud",strategy:oe},{name:"Stochastic Oscillator",strategy:ae},{name:"Williams R",strategy:ce},{name:"Absolute Price Oscillator (APO)",strategy:fe},{name:"Aroon Strategy",strategy:be},{name:"Balance of Power (BOM)",strategy:de},{name:"Chande Forecast Oscillator (CFO)",strategy:Ae},{name:"KDJ Strategy",strategy:Le},{name:"MACD Strategy",strategy:Oe},{name:"Parabolic SAR",strategy:Ee},{name:"Typical Price",strategy:Re},{name:"Vortex Strategy",strategy:Fe},{name:"Acceleration Bands",strategy:Pe},{name:"Bollinger Bands",strategy:Ne},{name:"Projection Oscillator",strategy:Ue},{name:"Chaikin Money Flow (CMF)",strategy:He},{name:"Ease of Movement (EMV)",strategy:_e},{name:"Force Index",strategy:je},{name:"Money Flow Index",strategy:Xe},{name:"Negative Volume Index (NVI)",strategy:ze},{name:"Volume Weighted Average Price",strategy:Qe}];function qt(t){return{strategyInfo:t.info,score:1,minGain:t.gain,maxGain:t.gain,averageGain:t.gain}}function Xt(t,e){t.score++,t.minGain=Math.min(t.minGain,e.gain),t.maxGain=Math.max(t.maxGain,e.gain),t.averageGain=(t.averageGain+e.gain)/2}function Kt(t){let e=new Map;for(let n of t){let o=n.strategyResults[0],m=e.get(o.info.name);m!==void 0?Xt(m,o):e.set(o.info.name,qt(o))}let r=Array.from(e.values());return r.sort((n,o)=>o.score-n.score),r}var ht=(m=>(m[m.STRATEGY=0]="STRATEGY",m[m.SCORE=1]="SCORE",m[m.MIN=2]="MIN",m[m.MAX=3]="MAX",m[m.AVERAGE=4]="AVERAGE",m))(ht||{});function $t(t,e,r){let n=[];switch(e){case 0:n=t.sort((o,m)=>o.strategyInfo.name.localeCompare(m.strategyInfo.name));break;case 1:n=t.sort((o,m)=>o.score-m.score);break;case 2:n=t.sort((o,m)=>o.minGain-m.minGain);break;case 3:n=t.sort((o,m)=>o.maxGain-m.maxGain);break;case 4:n=t.sort((o,m)=>o.averageGain-m.averageGain);break}return r||(n=n.reverse()),n}var v=class t{constructor(e,r){this.min=e,this.max=r}getMin(){return this.min}getMax(){return this.max}span(){return this.max-this.min}static merge(e){return e.reduce((r,n)=>new t(Math.min(r.min,n.min),Math.max(r.max,n.max)))}static from(e){return new t(Math.min(...e),Math.max(...e))}};var I=class{constructor(e,r){this.fromDelta=e.getMin(),this.toDelta=r.getMin(),this.multiplier=r.span()/e.span()}scale(e){return(e-this.fromDelta)*this.multiplier+this.toDelta}descale(e){return(e-this.toDelta)/this.multiplier+this.fromDelta}};var zt="black",Jt=1,Qt="red",Zt=1,er=30,Ze=4,tr="14px Arial",et=-1,q=new v(0,1),tt=class{constructor(e){let r=document.getElementById(e);if(r===null)throw new Error("Canvas element not found");if(!(r instanceof HTMLCanvasElement))throw new Error("Not a canvas element");this.canvas=r;let n=this.canvas.getContext("2d");if(n===null)throw new Error("Canvas context is null");this.context=n,this.dataSets=new Map,this.dateSetsChanged=!1,this.xScaler=new I(q,q),this.yScaler=new I(q,q),this.xFocus=et,this.canvas.addEventListener("mousemove",o=>this.onMouseMove(o)),this.canvas.addEventListener("mouseout",()=>this.onMouseOut())}add(e){this.dataSets.set(e.legend,e),this.dateSetsChanged=!0}remove(e){let r=this.dataSets.delete(e);return r&&(this.dateSetsChanged=!0),r}draw(){this.dateSetsChanged&&(this.updateScalers(),this.dateSetsChanged=!1),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawDataSets(),this.drawFocus()}drawDataSets(){var r;let e=this.chartHeight();for(let n of this.dataSets.values()){this.context.lineWidth=(r=n.width)!=null?r:Jt;let o=0,m=0;for(let i=0;i<n.values.length;i++){let a=this.xScaler.scale(i),f=e-this.yScaler.scale(n.values[i]);i>0&&(this.context.strokeStyle=this.styleAtIndex(n,i),this.context.beginPath(),this.context.moveTo(o,m),this.context.lineTo(a,f),this.context.stroke()),o=a,m=f}}}styleAtIndex(e,r){return e.style===void 0?zt:Array.isArray(e.style)?e.style[r]:e.style}drawFocus(){this.xFocus!==et&&(this.drawFocusLine(),this.drawFocusedValues())}drawFocusLine(){this.context.strokeStyle=Qt,this.context.lineWidth=Zt,this.context.beginPath(),this.context.moveTo(this.xFocus,0),this.context.lineTo(this.xFocus,this.chartHeight()),this.context.stroke()}drawFocusedValues(){let e=Math.round(this.xScaler.descale(this.xFocus)),r=Ze;this.context.font=tr,this.context.textBaseline="bottom";for(let n of this.dataSets.values())if(e>=0&&e<n.values.length){let o=n.legend+" "+G(2,n.values[e]).toString();this.context.fillStyle=this.styleAtIndex(n,e),this.context.fillText(o,r,this.canvas.height-Ze),r+=this.context.measureText(o).width+Ze}}chartHeight(){return this.canvas.height-er}updateScalers(){this.dataSets.size!==0&&(this.xScaler=new I(new v(0,Math.max(...Array.from(this.dataSets.values(),e=>e.values.length))),new v(0,this.canvas.width)),this.yScaler=new I(v.merge(Array.from(this.dataSets.values(),e=>v.from(e.values))),new v(0,this.chartHeight())))}onMouseMove(e){let r=this.canvas.getBoundingClientRect();this.xFocus=e.clientX-r.left,this.draw()}onMouseOut(){this.xFocus=et,this.draw()}};function rr(t){return t.toISOString().substring(0,10)}function nr(t){let e=new Date;return e.setDate(e.getDate()-t),e}function or(t,e){let r=new Date(t);return r.setDate(r.getDate()+e),r}function mr(t){return(t.getMonth()+1).toString()+"/"+t.getDate().toString()}function rt(t,e,r,n){let o=s(u(u(r,e),u(t,r)),u(t,e)),m=x(o,n),i=new Array(m.length);for(let a=0;a<i.length;a++)i[a]=m[a],a>0&&(i[a]+=i[a-1]);return i}function xt(t,e,r,n,o,m){let i=rt(r,n,o,m),a=u(p(t,i),p(e,i));return{ad:i,co:a}}function ir(t,e,r,n){return xt(3,10,t,e,r,n)}var ur=12,ar=26,sr=9;function yt(t,e,r,n){let o=p(t,n),m=p(e,n),i=l(100,s(u(o,m),m)),a=p(r,i),f=u(i,a);return{ppo:i,signal:a,histogram:f}}function cr(t){return yt(ur,ar,sr,t)}var lr=12,fr=26,pr=9;function At(t,e,r,n){let o=p(t,n),m=p(e,n),i=l(100,s(u(o,m),m)),a=p(r,i),f=u(i,a);return{pvo:i,signal:a,histogram:f}}function br(t){return At(lr,fr,pr,t)}var St=20;function Lt(t,e,r,n){let o=P(e,r,n),m=b(t,o),i=b(t,E(u(o,m)));return s(u(o,m),l(.015,i))}function gr(t,e,r){return Lt(St,t,e,r)}function dr(t,e){let r=p(t,e),n=p(t,r);return u(l(2,r),n)}function hr(t,e){let r=p(9,u(t,e)),n=p(9,r),o=s(r,n);return A(25,o)}function xr(t,e,r){return b(t,u(r,e))}function yr(t,e){let r=p(t,e),n=p(t,r),o=p(t,n);return g(u(l(3,r),l(3,n)),o)}function Ar(t,e){let r=0,n=0;return t%2===0?(r=t/2,n=r+1):(r=(t+1)/2,n=r),b(r,b(n,e))}function Sr(t,e){let r=p(t,e),n=p(t,r),o=p(t,n),m=C(1,o[0],o);return s(u(o,m),m)}var X=20;function K(t,e,r){return s(A(t,x(e,r)),A(t,r))}function Lr(t,e){return K(X,t,e)}function V(t,e,r,n){d(e,r,n);let o=k(u(e,r),u(e,n),u(n,r)),m=b(t,o);return{trLine:o,atrLine:m}}var wr=90;function Or(t){let e=s(u(t.upperBand,t.lowerBand),t.middleBand),r=p(wr,e);return{bandWidth:e,bandWidthEma90:r}}var nt=22;function vr(t,e,r){let n=V(nt,t,e,r),o=l(3,n.atrLine),m=y(nt,t),i=S(nt,e),a=u(m,o),f=g(i,o);return{exitLong:a,exitShort:f}}function Br(t,e){let r=y(t,e),n=S(t,e),o=L(2,g(r,n));return{upperChannel:r,middleChannel:o,lowerChannel:n}}var wt=20;function Ot(t,e,r,n){let o=V(t,e,r,n),m=l(2,o.atrLine),i=p(t,n),a=g(i,m),f=u(i,m);return{middleLine:i,upperBand:a,lowerBand:f}}function Er(t,e,r){return Ot(wt,t,e,r)}var vt=14;function Bt(t,e){let r=y(t,e),n=l(100,s(u(e,r),r)),o=b(t,x(n,n));return Q(o)}function Rr(t){return Bt(vt,t)}function Ir(t,e){d(t,e);let r=new Array(t.length);for(let n=1;n<r.length;n++)n===0?r[n]=0:(r[n]=r[n-1],t[n]>t[n-1]?r[n]+=e[n]:t[n]<t[n-1]&&(r[n]-=e[n]));return r}function Dr(t,e){let r=C(1,t[0],t),n=x(e,s(u(t,r),r));return A(n.length,n)}function Fr(t){return{dates:new Array(t),openings:new Array(t),closings:new Array(t),highs:new Array(t),lows:new Array(t),volumes:new Array(t)}}function Mr(t,e){return{dates:[...t.dates,...e.dates],openings:[...t.openings,...e.openings],closings:[...t.closings,...e.closings],highs:[...t.highs,...e.highs],lows:[...t.lows,...e.lows],volumes:[...t.volumes,...e.volumes]}}function Et(t,e){let r=b(t,e.closings),n=K(t,e.closings,e.volumes),o=new Array(n.length);for(let m=0;m<o.length;m++)n[m]>r[m]?o[m]=1:n[m]<r[m]?o[m]=-1:o[m]=0;return o}function Pr(t){return Et(X,t)}0&&(module.exports={Action,BinarySearchTree,CMF_DEFAULT_PERIOD,CMI_PERIOD,Chart,CompanyResultSortBy,DEFAULT_VWMA_PERIOD,EMV_DEFAULT_PERIOD,KC_PERIOD,NVI_DEFAULT_PERIOD,NumRange,NumScaler,STRATEGY_INFOS,StrategyStatsSortBy,Trend,UI_DEFAULT_PERIOD,VWAP_DEFAULT_PERIOD,abs,absolutePriceOscillator,absolutePriceOscillatorStrategy,accelerationBands,accelerationBandsStrategy,accumulationDistribution,add,addBy,applyActions,aroon,aroonStrategy,atr,awesomeOscillator,awesomeOscillatorStrategy,backtest,balanceOfPower,balanceOfPowerStrategy,bollingerBands,bollingerBandsStrategy,bollingerBandsWidth,buyAndHoldStrategy,chaikinMoneyFlow,chaikinMoneyFlowStrategy,chaikinOscillator,chandeForecastOscillator,chandeForecastOscillatorStrategy,chandelierExit,changes,checkSameLength,communityChannelIndex,computeStrategyStats,concatAssets,customRsi,daysAgo,daysLaterFrom,defaultAbsolutePriceOscillator,defaultAbsolutePriceOscillatorStrategy,defaultChaikinOscillator,defaultCommunityChannelIndex,defaultEaseOfMovement,defaultForceIndex,defaultKdj,defaultKeltnerChannel,defaultMoneyFlowIndex,defaultPercentagePriceOscillator,defaultPercentageVolumeOscillator,defaultProjectionOscillator,defaultUlcerIndex,defaultVolumeWeightedAveragePrice,defaultVwma,defaultVwmaStrategy,dema,divide,divideBy,donchianChannel,easeOfMovement,easeOfMovementStrategy,ema,extractSigns,forceIndex,forceIndexStrategy,generateNumbers,ichimokuCloud,ichimokuCloudStrategy,kdj,kdjStrategy,keltnerChannel,leastSquare,linearRegressionUsingLeastSquare,macd,macdStrategy,massIndex,max,mmax,mmin,moneyFlowIndex,moneyFlowIndexStrategy,movingChandeForecastOscillator,movingLeastSquare,movingLinearRegressionUsingLeastSquare,mstd,msum,multiply,multiplyBy,negativeVolumeIndex,negativeVolumeIndexStrategy,newAssetWithLength,onBalanceVolume,parabolicSar,parabolicSarStrategy,percentagePriceOscillator,percentageVolumeOscillator,pow,projectionOscillator,projectionOscillatorStrategy,qstick,reverseActions,rma,roundDigits,roundDigitsAll,rsi,rsi2,rsi2Strategy,shiftRightAndFillBy,shiftRightBy,since,sma,sortCompanyResults,sortStrategyStats,sqrt,stochasticOscillator,stochasticOscillatorStrategy,subtract,subtractBy,tema,toISODateString,toMonthAndDay,transpose,trima,trix,typicalPrice,typicalPriceStrategy,ulcerIndex,volumePriceTrend,volumeWeightedAveragePrice,volumeWeightedAveragePriceStrategy,vortex,vortexStrategy,vwma,williamsR,williamsRStrategy,wvmaStrategy});
//# sourceMappingURL=index.js.map
